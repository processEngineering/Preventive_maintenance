<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>AF.SP 05.13 Rev-00 ‚Äì CHECKLIST HARIAN MESIN INJECTION</title>
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- html2canvas: Untuk memotret layar -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- jsPDF: Untuk membuat file PDF dari hasil potret -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        /* --- SETTING HALAMAN --- */
        body { 
            font-family: 'Arial Narrow', 'Helvetica Narrow', Arial, sans-serif; 
            font-size: 7pt; 
            margin: 0; 
            padding: 20px; 
            background: #222222; 
            color: #eeeeee; 
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-bottom: 80px; 
        }

        /* CONTAINER KERTAS (YANG AKAN DI-FOTO) */
        .sheet { 
            background: white; 
            color: black; 
            padding: 5mm 8mm; 
            width: 297mm; 
            min-height: 210mm; /* A4 Landscape size */
            box-shadow: 0 0 20px rgba(0,0,0,0.5); 
            box-sizing: border-box;
            position: relative;
            margin-bottom: 20px;
        }

        /* TABEL GLOBAL */
        table { 
            border-collapse: collapse; 
            width: 100%; 
            table-layout: fixed; 
            margin-bottom: 2px; 
        }
        
        td, th { 
            border: 1px solid black; 
            padding: 1px 2px; 
            vertical-align: middle; 
            line-height: 1.05;
            color: black; 
        }

        /* --- HEADER SECTION --- */
        .header-table { border: 2px solid black !important; }
        .header-table td { height: 35px; } 
        /* Logo perlu crossOrigin agar bisa di-canvas */
        .logo-img { height: 35px; display: block; margin: 0 auto; }
        .main-title { font-size: 12pt; font-weight: bold; text-align: center; text-transform: uppercase; }
        .doc-info { font-size: 6pt; line-height: 1.15; padding: 2px 4px; }

        /* --- INFO MESIN SECTION --- */
        .info-table { border: 2px solid black; }
        .info-table td { font-weight: bold; font-size: 7pt; padding: 1px 3px; border: none; }
        .dot-line { border-bottom: 1px dotted #000; display: inline-block; width: 95%; font-weight: normal; padding-left: 5px; }

        /* --- MAIN GRID TABLE --- */
        .grid-table { border: 2px solid black; }
        .grid-table th { 
            background-color: #ffffff; 
            text-align: center; 
            font-weight: bold; 
            border: 1px solid black; 
            font-size: 6.5pt; 
            height: 18px; 
        }

        /* LEBAR KOLOM */
        .col-no { width: 18px; text-align: center; }
        .col-item { width: 180px; text-align: left; }
        .col-spacer { width: 6px; border-left: none; border-right: none; background: #f4f4f4; } 
        .col-std { width: 110px; text-align: center; font-size: 6pt; white-space: normal; }
        .col-met { width: 50px; text-align: center; font-size: 6pt; }
        .col-note { width: 40px; text-align: center; }
        .col-date { width: 17px; text-align: center; font-size: 7pt; padding: 0; }

        /* BARIS KATEGORI */
        .cat-row { 
            background-color: #d9d9d9 !important; 
            font-weight: bold; 
            text-align: left; 
            padding-left: 5px; 
            border: 1px solid black; 
            text-transform: uppercase; 
            font-size: 7pt; 
            height: 16px; 
        }

        /* STATUS VISUAL */
        .st-ok { color: #000; font-weight: 900; font-family: 'DejaVu Sans', sans-serif; font-size: 9pt; } 
        .st-ng { color: red !important; font-weight: 900; font-size: 8pt; }
        .st-mt { color: blue !important; font-weight: 900; font-size: 8pt; } 
        .st-na { color: #666 !important; font-weight: 900; font-size: 8pt; }
        .st-val { color: #000; font-weight: bold; font-size: 7pt; }

        /* SIGNATURE AREA */
        .sig-row td { background-color: #f2f2f2 !important; font-weight: bold; text-align: right; padding-right: 4px; font-size: 6pt; }
        .sig-cell { height: 28px; background: white !important; padding: 0 !important; text-align: center; vertical-align: middle; }
        .sig-img { width: 100%; height: 100%; max-height: 24px; object-fit: contain; mix-blend-mode: multiply; }

        /* --- FOOTER SECTION --- */
        .footer-wrapper { display: flex; border: 2px solid black; margin-top: 3px; height: 75px; }
        .footer-left { flex: 2.2; border-right: 1px solid black; padding: 3px; font-size: 6pt; line-height: 1.3; }
        
        .footer-right { 
            flex: 1; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: space-between; 
            padding: 3px; 
            overflow: hidden; 
        }
        
        .super-title { font-weight: bold; text-align: center; text-decoration: underline; margin-bottom: 2px; font-size: 6.5pt; }
        .super-sig { flex-grow: 1; display: flex; align-items: center; justify-content: center; width: 100%; }
        
        .super-name { 
            font-weight: bold; 
            text-decoration: underline; 
            text-transform: uppercase; 
            font-size: 7pt; 
            text-align: center;
            width: 100%;
            word-wrap: break-word; 
            line-height: 1.1;     
            max-height: 25px;      
            overflow: hidden;
        }

        .super-img { 
            max-height: 35px; 
            max-width: 75px;  
            width: auto;
            mix-blend-mode: multiply; 
        }

        /* UI PANEL (NON PRINT) */
        .no-print { 
            background: #000; color: white; padding: 12px; margin-bottom: 15px; width: 100%; max-width: 297mm;
            display: flex; flex-direction: column; gap: 10px; justify-content: center; align-items: center; 
            box-shadow: 0 4px 6px -1px rgba(255, 0, 0, 0.2); border-radius: 8px;
            border: 1px solid #333;
        }
        .controls-row { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; justify-content: center; }
        select, button { padding: 8px 12px; border-radius: 4px; border: none; font-weight: bold; cursor: pointer; }
        button.print-btn { background: #b91c1c; color: white; }
        button.print-btn:hover { background: #dc2626; }
        button.load-btn { background: #333; color: white; border: 1px solid #555; }
        button.load-btn:hover { background: #555; }
        #status-msg { color: #fbbf24; font-weight: bold; font-size: 14px; min-height: 20px; }

        /* NAVIGASI BAWAH */
        .nav-bar {
            position: fixed; bottom: 0; left: 0; right: 0; 
            background: #000000;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.8);
            border-top: 1px solid #333;
            display: flex; justify-content: space-around; align-items: center;
            padding: 12px 0; z-index: 1000; height: 60px;
        }
        .nav-btn {
            flex: 1; display: flex; align-items: center; justify-content: center;
            text-decoration: none; 
            color: #550000;
            padding: 0; border: none; background: none; cursor: pointer;
            transition: all 0.3s ease;
        }
        .nav-icon { width: 24px; height: 24px; }
        .nav-icon svg { width: 100%; height: 100%; fill: none; stroke: currentColor; stroke-width: 2.5; stroke-linecap: round; stroke-linejoin: round; }
        .nav-btn.active, .nav-btn:hover { 
            color: #ff0000;
            filter: drop-shadow(0 0 6px rgba(255, 0, 0, 0.7));
            transform: scale(1.1);
        }

    </style>
</head>
<body>

<div class="no-print">
    <div class="controls-row">
        <span>üñ®Ô∏è PANEL KONTROL:</span>
        <select id="machine-select"><option value="">-- Pilih Mesin --</option></select>
        <select id="month-select"></select>
        <select id="year-select"></select>
        <button class="load-btn" onclick="loadData()">TAMPILKAN DATA</button>
        <!-- Ganti Fungsi Print jadi Fungsi Capture -->
        <button class="print-btn" onclick="captureAndExportPDF()">EKSPOR PDF (GAMBAR)</button>
    </div>
    <div id="status-msg"></div>
</div>

<div class="sheet" id="sheet-content">
    
    <table class="header-table">
        <tr>
            <td width="15%" style="text-align:center;">
                <!-- Crossorigin anonymous penting untuk html2canvas -->
                <img src="https://amarilyskg.co.id/bootstrap/img/logo.png" class="logo-img" alt="Logo" crossorigin="anonymous">
            </td>
            <td width="60%" class="main-title">CHECK LIST HARIAN MESIN INJECTION</td>
            <td width="25%" class="doc-info">
                No Dokumen &nbsp;&nbsp;&nbsp;: AF.SP 05.13.Rev-00<br>
                Tanggal Terbit : 02 Agustus 2024<br>
                Halaman &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 1/1<br>
                Tanggal Revisi : -
            </td>
        </tr>
    </table>

    <table class="info-table">
        <tr>
            <td width="12%">MERK MESIN</td><td width="1%">:</td><td width="30%"><span id="out-merk" class="dot-line"></span></td>
            <td width="10%">SERIAL NO</td><td width="1%">:</td><td width="25%"><span id="out-sn" class="dot-line"></span></td>
            <td width="8%">BULAN</td><td width="1%">:</td><td><span id="out-bln" class="dot-line"></span></td>
        </tr>
        <tr>
            <td>TONAGE</td><td>:</td><td><span id="out-ton" class="dot-line"></span></td>
            <td></td><td></td><td></td>
            <td>TAHUN</td><td>:</td><td><span id="out-thn" class="dot-line"></span></td>
        </tr>
    </table>

    <table class="grid-table">
        <thead>
            <tr>
                <th rowspan="2" class="col-no">No</th>
                <th rowspan="2" class="col-item">Jenis pengecekan</th>
                <th rowspan="2" class="col-spacer"></th>
                <th rowspan="2" class="col-std">Standard</th>
                <th rowspan="2" class="col-met">METODE</th>
                <th rowspan="2" class="col-note">CATATAN</th>
                <th colspan="31" style="height:14px;">Tanggal</th>
            </tr>
            <tr id="date-row"></tr>
        </thead>
        <tbody id="main-body">
            <tr><td colspan="38" style="text-align:center; padding:20px; color:black;">Silahkan Pilih Filter Data...</td></tr>
        </tbody>
        
        <tbody id="sig-body" style="display:none;">
            <tr class="sig-row">
                <td colspan="6">Paraf Pelaksana</td>
                <script>for(let i=1;i<=31;i++) document.write(`<td class="sig-cell" id="p-sig-${i}"></td>`);</script>
            </tr>
            <tr class="sig-row">
                <td colspan="6">Paraf Koordinator</td>
                <script>for(let i=1;i<=31;i++) document.write(`<td class="sig-cell" id="k-sig-${i}"></td>`);</script>
            </tr>
        </tbody>
    </table>

    <div class="footer-wrapper">
        <div class="footer-left">
            <b>Catatan :</b><br>
            (*) : Isi kolom laporan ceklist jika unit ini ada dimesin ini<br>
            (**) : Diisi angka jam kerja mesin / running hour yang ada dimesin<br><br>
            <b>Beri tanda :</b><br>
            <span style="font-weight:bold;">‚úì</span> OK (Sesuai Standar) &nbsp;&nbsp;
            <span style="font-weight:bold; color:red;">X</span> NG (Rusak/Penyimpangan) &nbsp;&nbsp;
            <span style="font-weight:bold; color:blue;">O</span> Perbaikan (Maintenance) &nbsp;&nbsp;
            <span style="font-weight:bold; color:#666;">-</span> Tidak Ada (NA)
        </div>
        <div class="footer-right">
            <div class="super-title">DIKETAHUI<br>MECHANIC SUPERINTENDENT</div>
            <div class="super-sig" id="out-sig-super">
                <span style="color:#ccc; font-size:6pt;">(Menunggu Pengesahan)</span>
            </div>
            <div class="super-name" id="out-name-super"></div>
        </div>
    </div>

</div>

<nav class="nav-bar">
    <a href="index.html" class="nav-btn"><div class="nav-icon"><svg viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg></div></a>
    <a href="menu_utama.html" class="nav-btn"><div class="nav-icon"><svg viewBox="0 0 24 24"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg></div></a>
    <a href="download_data.html" class="nav-btn active"><div class="nav-icon"><svg viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></div></a>
    <a href="informasi_akun.html" class="nav-btn"><div class="nav-icon"><svg viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg></div></a>
</nav>

<script>
    const _URL = "https://dsyvlavphvrdidmodokd.supabase.co";
    const _KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzeXZsYXZwaHZyZGlkbW9kb2tkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYyNzI5NjMsImV4cCI6MjA4MTg0ODk2M30.mLmyZMUPtCaQl5Vck-Y7nImDFQuVWN_Mk6PrE-miP2E";
    const sb = supabase.createClient(_URL, _KEY);

    const MASTER_ITEMS = [
        {kode:"", kategori:"Mekanikal:", nama:""},
        {kode:"a", nama:"Nozzle visual", std:"Radius tidak rusak, tidak ada leleah material meler", met:"Visual"},
        {kode:"b", nama:"Kebersihan Head Nozzle barrel", std:"tidak ada material yang menempel", met:"Visual"},
        {kode:"c", nama:"Check level oli mesin", std:"> Level garis tengah", met:"Visual"},
        {kode:"d", nama:"Check pump central lubrikasi", std:"berfungsi baik", met:"Visual"},
        {kode:"e", nama:"Check keseluruhan kondisi mesin", std:"Lengkap dan bersih", met:"Visual"},
        {kode:"f", nama:"Check kondisi lampu indicator", std:"Nyala sesuai fungsi", met:"Visual"},
        {kode:"g", nama:"Pastikan pintu panel kontrol tertutup", std:"Tertutup", met:"Tangan"},
        {kode:"h", nama:"Check temperatur oli", std:"40 - 50¬∞C", met:"Display control"},
        {kode:"i", nama:"Running hour (jam)(**)", std:"Sesuai aktual mesin", met:"Visual"},
        {kode:"", kategori:"Kebersihan debu :", nama:""},
        {kode:"a", nama:"Pintu Mesin (kaca/acrilric)", std:"Bersih tidak berdebu", met:"Lap majun"},
        {kode:"b", nama:"Kap mesin", std:"Bersih tidak berdebu", met:"Lap majun"},
        {kode:"c", nama:"Kap inject unit", std:"Bersih tidak berdebu", met:"Lap majun"},
        {kode:"d", nama:"Panel mesin", std:"Bersih tidak berdebu", met:"Lap majun"},
        {kode:"", kategori:"Kebersihan Oli:", nama:""},
        {kode:"a", nama:"Lantai area mesin", std:"Tidak kotor oli", met:"Lap & busa spon"},
        {kode:"b", nama:"Bawah mesin", std:"Tidak kotor oli", met:"Lap & busa spon"},
        {kode:"c", nama:"Bawah inject unit", std:"Tidak kotor oli", met:"Lap & busa spon"},
        {kode:"", kategori:"Kebersihan Air :", nama:""},
        {kode:"a", nama:"Pemeriksaan instalasi air", std:"Fitting / balvalve tidak bocor", met:"Lap majun"},
        {kode:"b", nama:"Embun pipa chiller", std:"Dilindungi armaflek", met:"Lap majun"},
        {kode:"", kategori:"Kebersihan Area Mesin", nama:""},
        {kode:"a", nama:"Pemeriksaan alat kerja/ sparepart setelah perbaikan", std:"Area mesin bersih, tidak terdapat ceceran tools & sparepart", met:"Visual"},
        {kode:"b", nama:"Kelengkapan selang angin sprial & air gun", std:"Terpasang rapih,lengkap dan berfungsi", met:"Visual"}
    ];

    function showStatus(msg, isError=false) {
        const el = document.getElementById('status-msg');
        el.innerText = msg;
        el.style.color = isError ? '#ef4444' : '#fbbf24';
        setTimeout(() => { el.innerText = ''; }, 5000);
    }

    async function initFilter() {
        try {
            const { data: m } = await sb.from('clhmi_machine').select('*').order('merk_mesin');
            m?.forEach(x => document.getElementById('machine-select').add(new Option(`${x.merk_mesin}`, x.id)));
            const mo = ["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];
            mo.forEach((v, i) => document.getElementById('month-select').add(new Option(v, i+1)));
            const y = new Date().getFullYear();
            for(let i=y; i>=y-2; i--) document.getElementById('year-select').add(new Option(i, i));
            
            let h = "";
            for(let i=1; i<=31; i++) h += `<th class="col-date">${i}</th>`;
            document.getElementById('date-row').innerHTML = h;
        } catch(e) { console.error(e); }
    }

    // --- FUNGSI EKSPOR PDF BARU (IMAGE BASED) ---
    async function captureAndExportPDF() {
        const btn = document.querySelector('.print-btn');
        const originalText = btn.innerText;
        
        // 1. Cek apakah data sudah dipilih
        if(document.getElementById('machine-select').value === "") {
            showStatus("Mohon pilih data dulu sebelum ekspor!", true);
            return;
        }

        try {
            btn.innerText = "‚è≥ Memproses Gambar...";
            showStatus("Sedang mengambil gambar tabel...");

            // 2. Setup elemen yang mau difoto
            const element = document.getElementById('sheet-content');
            
            // 3. Gunakan html2canvas untuk 'memotret' elemen
            // scale: 2 bikin gambar jadi high-res (biar ga pecah saat di zoom)
            const canvas = await html2canvas(element, {
                scale: 2,
                useCORS: true, // Penting buat gambar logo eksternal
                allowTaint: true,
                backgroundColor: "#ffffff" // Pastikan background putih
            });

            btn.innerText = "‚è≥ Membuat PDF...";

            // 4. Setup jsPDF (Landscape, mm, A4)
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF('l', 'mm', 'a4');

            // 5. Hitung dimensi agar pas di A4
            const imgData = canvas.toDataURL('image/png');
            const pdfWidth = 297; // Lebar A4 Landscape
            const pdfHeight = 210; // Tinggi A4 Landscape
            
            // Masukkan gambar ke PDF full page
            pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);

            // 6. Simpan File
            const machineName = document.getElementById('machine-select').selectedOptions[0].text;
            const bln = document.getElementById('month-select').selectedOptions[0].text;
            const filename = `Laporan_${machineName}_${bln}.pdf`;
            
            pdf.save(filename);
            
            showStatus("PDF berhasil diunduh!");
        } catch (err) {
            console.error(err);
            showStatus("Gagal ekspor PDF. Cek console.", true);
            alert("Gagal: " + err.message);
        } finally {
            btn.innerText = originalText;
        }
    }

    async function loadData() {
        const mId = document.getElementById('machine-select').value;
        const bln = document.getElementById('month-select').value;
        const thn = document.getElementById('year-select').value;
        if(!mId || !bln || !thn) {
            showStatus("Mohon pilih Mesin, Bulan, dan Tahun dulu!", true);
            return;
        }

        showStatus("Sedang memuat data...");

        for(let i=1; i<=31; i++) {
            document.getElementById(`p-sig-${i}`).innerHTML = "";
            document.getElementById(`k-sig-${i}`).innerHTML = "";
        }
        document.getElementById('sig-body').style.display = 'table-row-group';

        const { data: headers, error: hErr } = await sb.from('clhmi')
            .select('*, clhmi_machine(tonage, serial_no, merk_mesin)')
            .eq('machine_id', mId).eq('bulan', parseInt(bln)).eq('tahun', parseInt(thn)).order('tanggal_isi');

        if(hErr || !headers || headers.length === 0) { 
            showStatus("Data laporan tidak ditemukan.", true); 
            document.getElementById('main-body').innerHTML = `<tr><td colspan="38" style="text-align:center; padding:20px; color:black;">DATA TIDAK DITEMUKAN</td></tr>`;
            return; 
        }

        const headerIds = headers.map(h => h.id);
        const { data: allRes, error: rErr } = await sb.from('clhmi_results')
            .select('item_kode, status, value, tanggal_cek, clhmi_items(nama_pengecekan)')
            .in('clhmi_id', headerIds);

        const head = headers[0];
        document.getElementById('out-merk').innerText = head.clhmi_machine?.merk_mesin || '-';
        document.getElementById('out-sn').innerText = head.clhmi_machine?.serial_no || '-';
        document.getElementById('out-ton').innerText = (head.clhmi_machine?.tonage || '-') + ' T';
        document.getElementById('out-bln').innerText = document.getElementById('month-select').options[bln-1].text.toUpperCase();
        document.getElementById('out-thn').innerText = thn;

        const tbody = document.getElementById('main-body');
        tbody.innerHTML = "";
        let curCat = "";

        MASTER_ITEMS.forEach(item => {
            if(item.kategori && item.kategori !== curCat) {
                tbody.innerHTML += `<tr><td colspan="38" class="cat-row">${item.kategori}</td></tr>`;
                curCat = item.kategori;
            }
            if(!item.nama) return;

            let row = `<tr>
                <td class="col-no">${item.kode}</td>
                <td class="col-item">${item.nama}</td>
                <td class="col-spacer"></td>
                <td class="col-std">${item.std}</td>
                <td class="col-met">${item.met}</td>
                <td class="col-note"></td>`;

            for(let d=1; d<=31; d++) {
                const f = allRes.find(r => {
                    const dbDate = parseInt(r.tanggal_cek.split('-')[2]);
                    const itemNameMatch = r.clhmi_items && r.clhmi_items.nama_pengecekan.trim() === item.nama.trim();
                    return dbDate === d && itemNameMatch;
                });

                let sym = '', cls = '';
                if(f) {
                    if (item.nama === "Running hour (jam)(**)") {
                        sym = f.value || '-';
                        cls = 'st-val';
                    } else {
                        if(f.status === 'OK') { sym = '‚úì'; cls = 'st-ok'; }
                        else if(f.status === 'NG') { sym = 'X'; cls = 'st-ng'; }
                        else if(f.status === 'MT') { sym = 'O'; cls = 'st-mt'; } 
                        else if(f.status === 'NA') { sym = '-'; cls = 'st-na'; }
                    }
                }
                row += `<td class="col-date ${cls}">${sym}</td>`;
            }
            tbody.innerHTML += row + "</tr>";
        });

        headers.forEach(h => {
            const d = parseInt(h.tanggal_isi.split('-')[2]);
            if(h.paraf) document.getElementById(`p-sig-${d}`).innerHTML = `<img src="${h.paraf}" class="sig-img">`;
            if(h.paraf_coord) document.getElementById(`k-sig-${d}`).innerHTML = `<img src="${h.paraf_coord}" class="sig-img">`;
        });

        const fin = headers.find(h => h.status_form === 'closed');
        const sigBox = document.getElementById('out-sig-super');
        const nameBox = document.getElementById("out-name-super");
        if(fin?.paraf_super) {
            sigBox.innerHTML = `<img src="${fin.paraf_super}" class="super-img">`;
            nameBox.innerText = (fin.verified_by || '').toUpperCase();
        } else {
            sigBox.innerHTML = `<span style="color:#ccc; font-size:6pt;">(Menunggu Pengesahan)</span>`;
            nameBox.innerText = "";
        }
        showStatus("Data berhasil dimuat!");
    }

    window.onload = initFilter;
</script>
</body>
</html>
